<h3 class="center"><%= t('charts.current_situation.title') %></h3>

<div class="row">
  <div class="col-xs-6">
    <div id="status-report-throughput-column"
         class="flow-chart"
         data-title='<%= t('projects.charts.throughput_per_week.title', target_name: target_name) %>'
         data-xcategories='<%= report_data.weeks %>'
         data-xtitle='<%= t('projects.charts.xlabel.weeks') %>'
         data-ytitle='<%= t('projects.charts.throughput_per_week.ylabel') %>'
         data-ysuffix='<%= t('projects.charts.throughput_per_week.ylabel') %>'
         data-series='<%= report_data.throughput_per_week.to_json %>'
         data-stacking='normal'
         data-decimals='0'>
    </div>
  </div>
  <div class="col-xs-6">
    <div id="status-report-delivered-column"
         class="flow-chart"
         data-xcategories='<%= ['Scope'] %>'
         data-title='<%= t('projects.charts.delivered.title', target_name: target_name) %>'
         data-ytitle='<%= t('projects.charts.throughput_per_week.ylabel') %>'
         data-ysuffix='<%= t('projects.charts.throughput_per_week.ylabel') %>'
         data-series='<%= report_data.delivered_vs_remaining.to_json %>'
         data-decimals='0'>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-6">
    <div id="status-report-deadline-bar"
         class="flow-chart"
         data-xcategories='<%= [t('projects.general.deadline')] %>'
         data-title='<%= t('projects.charts.deadline.title', target_name: target_name) %>'
         data-ytitle='<%= t('projects.charts.xlabel.days') %>'
         data-ysuffix='<%= t('projects.charts.xlabel.days') %>'
         data-series='<%= report_data.deadline.to_json %>'
         data-stacking='normal'
         data-decimals='0'>
    </div>
  </div>
  <div class="col-xs-6">
    <div id="status-report-hours-column"
         class="flow-chart"
         data-xcategories='<%= report_data.effort_hours_per_month[:keys].map { |year, month| Date.new(year, month, 1).to_s } %>'
         data-title='<%= t('projects.charts.hours_per_month.title', target_name: target_name) %>'
         data-ytitle='<%= t('projects.charts.hours_per_month.ylabel') %>'
         data-ysuffix='<%= t('projects.charts.hours_per_month.ylabel') %>'
         data-series='<%= [{ name: I18n.t('projects.charts.throughput_per_week.stage_stream.upstream'), data: report_data.effort_hours_per_month[:data][:upstream]&.map(&:to_f) }, { name: I18n.t('projects.charts.throughput_per_week.stage_stream.downstream'), data: report_data.effort_hours_per_month[:data][:downstream]&.map(&:to_f) }].to_json %>'
         data-stacking='normal'
         data-decimals='0'>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-6">
    <div id="burnup-hours"
         class="flow-chart"
         data-title='<%= t('projects.charts.burnup.hours.title', project_name: target_name) %>'
         data-weeks='<%= report_data.weeks %>'
         data-xtitle='<%= t('projects.charts.xlabel.weeks') %>'
         data-ytitle='<%= t('projects.charts.burnup.ylabel') %>'
         data-tooltipsufix='<%= t('projects.charts.burnup.tooltipsufix') %>'
         data-ideal='<%= report_data.hours_burnup_data.ideal_per_week %>'
         data-current='<%= report_data.hours_burnup_data.current_per_week %>'
         data-scope='<%= report_data.hours_burnup_data.scope_per_week %>'>
    </div>
  </div>
</div>

<h3 class="center"><%= t('charts.projections.title') %></h3>

<div class="row">
  <div class="col-xs-6">
    <div id="status-report-dates-odds-column"
         class="flow-chart"
         data-xcategories=<%= [t('charts.date_odds.xtitle')] %>
             data-title='<%= t('charts.date_odds.title', target_name: target_name) %>'
         data-ytitle='<%= t('charts.date_odds.ytitle') %>'
         data-ysuffix="%"
         data-tooltipsufix='<%= t('projects.charts.date_odds.tooltipsufix') %>'
         data-series='<%= report_data.dates_and_odds[:chart].to_json %>'
         data-decimals='3'>
    </div>
  </div>
  <div class="col-xs-6">
    <div id="status-report-montecarlo-column"
         class="flow-chart"
         data-xcategories='<%= @montecarlo_dates.monte_carlo_date_hash.keys.map(&:to_s) %>'
         data-title='<%= t('charts.montecarlo.title', target_name: target_name) %>'
         data-ytitle='<%= t('charts.date_odds.ytitle') %>'
         data-ysuffix="%"
         data-tooltipsufix='<%= t('projects.charts.throughput_per_week.tooltipsufix') %>'
         data-series='<%= [{ name: 'monte carlo dates', data: @montecarlo_dates.monte_carlo_date_hash.values.flatten.map(&:to_f).map { |value| value * 100 } }].to_json %>'
         data-decimals='3'>
    </div>
  </div>
</div>
