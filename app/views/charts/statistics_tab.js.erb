var statsChartsDiv = $('#statistics-charts')

statsChartsDiv.html("<%= escape_javascript(render 'charts/statistics_charts', start_date: @start_date,
                                                                              end_date: @end_date,
                                                                              x_axis: @x_axis,
                                                                              project_statistics_data: @project_statistics_data,
                                                                              portfolio_statistics_data: @portfolio_statistics_data) %>");

buildStatisticsCharts();

var blockByProject = $('#column-block-by-project');
buildColumnChart(blockByProject);

var agingByProject = $('#column-aging-by-project');
buildColumnChart(agingByProject);

$('#general-loader').hide();
statsChartsDiv.show();

$('#stats-charts-body').show();
enableTabs();

statsTab = document.getElementsByClassName("stats-tab");
statsTab[0].className += " active";
document.getElementById("stats-scope").style.display = "block";

$('#search-stats').on('click', function() {
    const companyId = $("#company_id").val();
    const projectsIds = $("#projects_ids").val();
    const targetName = $("#target_name").val();

    const statsStartDate = $('#stats_start_date').val();
    const statsEndDate = $('#stats_end_date').val();
    const statsPeriod = $('#stats_chart_period').val();
    const statsLeadtimeConfidence = $('#stats_leadtime_confidence').val();

    statisticsChartsRoute(companyId, projectsIds, statsPeriod, targetName, statsStartDate, statsEndDate, statsLeadtimeConfidence, '');
});

