<div class="row">
  <div class="col-xs-6">
    <h2><%= t('financial_informations.index.title') %></h2>
  </div>
</div>

<div class="row">
  <div class="col-xs-3">
    <%= link_to t('financial_informations.new.title'), new_company_financial_information_path(@company), class: 'btn btn-sm btn-primary bottom-spaced-component' %>
  </div>
</div>

<div class="row">
  <div class="col-xs-4 incomes-div">
    <sup><%= t('financial_informations.index.total_income_in_period') %></sup>
    <div class="finances-consolidation-value"><%= number_to_currency(@financial_informations.sum(&:income_total)) %></div>
  </div>
  <div class="col-xs-4 outcomes-div">
    <sup><%= t('financial_informations.index.total_outcome_in_period') %></sup>
    <div class="finances-consolidation-value"><%= number_to_currency(@financial_informations.sum(&:expenses_total)) %></div>
  </div>
  <div class="col-xs-4 balance-div">
    <sup><%= t('financial_informations.index.total_balance_in_period') %></sup>
    <div class="finances-consolidation-value"><%= number_to_currency(@financial_informations.sum(&:income_total) - @financial_informations.sum(&:expenses_total)) %></div>
  </div>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= t('general.month') %></th>
      <th><%= FinancialInformation.human_attribute_name :income_total %></th>
      <th><%= FinancialInformation.human_attribute_name :expenses_total %></th>
      <th><%= t('financial_informations.index.throughput') %></th>
      <th><%= t('financial_informations.index.project_delivered_hours_count') %></th>
      <th><%= t('financial_informations.index.hours_per_demand') %></th>
      <th><%= t('financial_informations.index.income_per_hour') %></th>
      <th><%= t('financial_informations.index.cost_per_hour') %></th>
      <th><%= t('financial_informations.index.monthly_cash_balance') %></th>
      <th><%= t('general.table.actions') %></th>
    </tr>
  </thead>
  <tbody>
    <% @financial_informations.each do |finance| %>
      <tr class='<%= 'red-data' if finance.red? %>'>
        <td><%= l(finance.finances_date, format: :month_year) %></td>
        <td><%= number_to_currency(finance.income_total) %></td>
        <td><%= number_to_currency(finance.expenses_total) %></td>
        <td><%= finance.throughput_in_month %></td>
        <td><%= number_with_precision(finance.project_delivered_hours, precision: 2) %></td>
        <td><%= number_with_precision(finance.hours_per_demand, precision: 2) %></td>
        <td><%= number_to_currency(finance.income_per_hour) %></td>
        <td><%= number_to_currency(finance.cost_per_hour) %></td>
        <td><%= number_to_currency(finance.financial_result) %></td>
        <td>
          <%= link_to edit_company_financial_information_path(@company, finance) do %>
            <i class="fas fa-edit"></i>
          <% end %>
          <%= link_to company_financial_information_path(@company, finance), method: :delete do %>
            <i class="fa fa-times" aria-hidden="true"></i>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
