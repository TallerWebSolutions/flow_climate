<%= form_tag statistics_tab_company_project_path(@company, @project), method: :get, remote: true do%>
  <div class="row bottom-spaced-component">
    <div class="col-xs-4">
      <%= label_tag Project.human_attribute_name(:start_date), nil, class: 'control-label' %>
      <%= date_field_tag :start_date, (params['start_date'] || @project.start_date), class: 'form-control' %>
    </div>

    <div class="col-xs-4">
      <%= label_tag Project.human_attribute_name(:end_date), nil, class: 'control-label' %>
      <%= date_field_tag :end_date, (params['end_date'] || @project.end_date), class: 'form-control' %>
    </div>

    <div class="col-xs-4">
      <div class="form-group">
        <%= label_tag t('charts.period.label') %>
        <%= select_tag :period, options_for_select([[I18n.t('general.monthly'), 'month'], [I18n.t('general.weekly'), 'week'], [I18n.t('general.daily'), 'day']], params['period'] || 'week'), class: 'form-control filter-checks' %>
      </div>
    </div>
  </div>

  <div class="row bottom-spaced-component">
    <div class="col-xs-3">
      <%= submit_tag t('general.search'), class: 'btn btn-primary' %>
    </div>
  </div>
<% end %>

<hr>

<% if project_statistics_chart_adapter.present? %>
  <div class="row">
    <div class="col-xs-10">
      <div id="area-scope-growth"
           class="flow-chart"
           data-xcategories='<%= project_statistics_chart_adapter.x_axis.to_json %>'
           data-title='<%= t('projects.charts.scope_variation.title') %>'
           data-ytitle='<%= t('charts.cfd.ytitle') %>'
           data-suffix='<%= t('charts.cfd.data_suffix') %>'
           data-series='<%= project_statistics_chart_adapter.scope_data_evolution_chart.to_json %>'
           data-stacking='normal'
           data-decimals='0'>
      </div>
    </div>

    <div class="col-xs-1 center-text">
      <div><%= t('general.start') %></div>
      <h3><%= project_statistics_chart_adapter.scope_data_evolution_chart[0][:data].first %></h3>
    </div>
    <div class="col-xs-1 center-text bottom-spaced-component">
      <div><%= t('general.finish') %></div>
      <h3><%= project_statistics_chart_adapter.scope_data_evolution_chart[0][:data].last %></h3>
    </div>

    <div class="col-xs-2">
      <hr>
    </div>

    <div class="col-xs-2 center-text">
      <div><%= t('stats.period.variation') %></div>
      <h3><%= number_to_percentage((period_variation * 100), precision: 1) %></h3>
    </div>
  </div>
<% else %>

  <%= t('general.no_data', missing_data: t('general.data')) %>
<% end %>
